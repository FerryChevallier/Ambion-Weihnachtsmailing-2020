/* AMBION Weihnachtsmailing 2020 */

var data={timeline:[{src:"https://player.vimeo.com/external/489314686.hd.mp4?s=5f87f28a50536059af61cb7c7d32bc66a8ee8737&profile_id=175",positions:[{title:"main1",start:"0",stop:"76.6",callEnd:"74",introEnd:"5",outtakesIn:"5"},{title:"main2",start:"80.5",stop:"187",callEnd:"187",introEnd:"84",outtakesIn:"0"},{title:"kazoo",start:"91.8",stop:"124"},{title:"robot",start:"125",stop:"155"},{title:"fire",start:"156.5",stop:"186"}]}]},videoController={randomVideoPosition:0,videoPosition:0,timelineData:data.timeline,videoInterval:null,player:null,modus:"pause",outtakes:!1,mainVideo:0,init:function(){this.player=videojs("video-player",{fluid:!0}),this.player.poster("assets/images/poster.jpg"),this.player.src([{src:this.timelineData[0].src,type:"video/mp4"}]),this.player.pause()},play:function(){this.randomVideoPosition=this.mainVideo,this.player.currentTime(this.timelineData[0].positions[this.randomVideoPosition].start),this.player.play(),this.startVideoInterval(),0==this.mainVideo?this.mainVideo=1:this.mainVideo=0},pause:function(){0!=this.randomVideoPosition&&1!=this.randomVideoPosition&&(this.randomVideoPosition=0),this.getCurrentVideoPosition()>this.timelineData[0].positions[this.randomVideoPosition].introEnd?this.player.currentTime(this.timelineData[0].positions[0].callEnd):(this.player.pause(),this.player.currentTime(0),this.clearVideoInterval(),navigationController.callButtonIn()),this.randomVideoPosition=0},random:function(i){var t=0;if(void 0!==i)t=parseInt(i);else if((t=Math.ceil(Math.random()*(this.timelineData[0].positions.length-1-1))+1)==this.randomVideoPosition)return void this.random();this.clearVideoInterval(),this.randomVideoPosition=t,this.setNewVideoPosition(t),this.player.play(),this.startVideoInterval()},setNewVideoPosition:function(i){t=this.timelineData[0].positions[i].start,this.player.currentTime(t)},getCurrentVideoPosition:function(){return this.player.currentTime()},checkVideoPositionAtEnd:function(){0!=this.randomVideoPosition&&1!=this.randomVideoPosition?this.getCurrentVideoPosition()>=this.timelineData[0].positions[this.randomVideoPosition].stop&&this.random():(this.getCurrentVideoPosition()>=this.timelineData[0].positions[this.randomVideoPosition].outtakesIn&&!this.outtakes&&(this.outtakes=!0,navigationController.unlockRandomOuttakes()),this.getCurrentVideoPosition()>=this.timelineData[0].positions[this.randomVideoPosition].stop&&(this.player.pause(),this.player.currentTime(0),this.clearVideoInterval(),navigationController.callButtonIn()))},startVideoInterval:function(){var i=this;this.videoInterval=setInterval(function(){i.checkVideoPositionAtEnd()},100)},clearVideoInterval:function(){clearInterval(this.videoInterval)}},navigationController={navigation:jQuery("navigation-container #content-navigation ul li div"),init:function(){var e=this;jQuery(this.navigation).each(function(i,t){jQuery(this).on("click",function(){var i;switch(jQuery(this).attr("data-type")){case"phone-call-in":videoController.play(),introController.hide(),e.callButtonOut();break;case"phone-call-out":videoController.pause();break;case"random-outtakes":jQuery(this).hasClass("locked")||(i=jQuery(this).attr("data-id"),videoController.random(i),e.callButtonOut())}}),jQuery(this).on("mouseover",function(){jQuery(this).addClass("slideInUp").removeClass("slideOutUp")}),jQuery(this).on("mouseout",function(){jQuery(this).addClass("slideOutUp").removeClass("slideInUp")})})},callButtonIn:function(){jQuery("navigation-container .icon.call-in").removeClass("hide"),jQuery("navigation-container .icon.call-out").addClass("hide")},callButtonOut:function(){jQuery("navigation-container .icon.call-in").addClass("hide"),jQuery("navigation-container .icon.call-out").removeClass("hide")},unlockRandomOuttakes:function(){jQuery(this.navigation).each(function(i,t){jQuery(this).hasClass("locked")&&jQuery(this).removeClass("locked").addClass("bounceIn").css("cursor","pointer")})}},introController={init:function(){var i=this;jQuery("intro-container #intro").on("click",function(){i.hide(),videoController.play(),navigationController.callButtonOut()})},hide:function(){jQuery("intro-container").hide()}},resizeController={aspectRatio:0,init:function(){this.resize(),this.aspectRatio=jQuery("#header-video #video").width()/jQuery("#header-video #video").height()},resize:function(){var i=jQuery(window),t=jQuery("#header-video #video"),e=jQuery(window).height()+100,o=jQuery(window).width()+100,n=!1;i.width()/i.height()<resizeController.aspectRatio?(n=!0,o=jQuery(window).height()/9*16+100,h=jQuery(window).width()/1920*1080,t.removeClass().addClass("wallpaperHeight")):(n=!1,t.removeClass().addClass("wallpaperWidth"),w=jQuery(window).height()/1080*1920),jQuery("#header-video #video").css({height:e+"px",width:o+"px"}),jQuery("#overlay").css({height:e+"px",width:o+"px"});var a=t.width(),s=t.height(),e=0,o=0;n?a>i.width()&&(e=(a-i.width())/2,o=(s-i.height())/2):(e=(a-i.width())/2,o=(i.width()/16*9-i.height())/2),t.css("margin","-"+o+"px 0 0 -"+e+"px")}},main={init:{setup:function(){videoController.init(),navigationController.init(),resizeController.init(),introController.init(),jQuery(window).resize(resizeController.resize).trigger("resize")}}};jQuery(window).on("load",function(){main.init.setup()}),window.addEventListener("blur",function(i){videoController.pause()});